# tasks file for ansible-role-deployment-automation
---
- name: Validate requested deployment state
  ansible.builtin.assert:
    that:
      - (state | default('present')) in ['present', 'absent']
    fail_msg: "state must be either 'present' or 'absent'."
    quiet: true

- name: Include provisioning workflow
  ansible.builtin.include_tasks: install.yml
  when: (state | default('present')) == 'present'

- name: Include uninstall workflow
  ansible.builtin.include_tasks: uninstall.yml
  when: (state | default('present')) == 'absent'
